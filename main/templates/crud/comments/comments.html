{% extends "/crud/crud_layout.html" %}
{% block title %} Comments {% endblock %}
{% block header %}Comments{% endblock %}
{% block add %}comments/add{% endblock %}
{% block add_title %}Add Comment{% endblock %}
{% block headers %}
<th scope="col">
  <a href="{{ url_for('comments.comments', sort='comment_id', order=next_order) }}">
    Comment ID {% if sort_column == 'comment_id' %} 
      {% if current_order == 'asc' %} ▲ 
      {% elif current_order == 'desc' %} ▼ 
      {% endif %} 
    {% endif %}
  </a>
</th>
<th scope="col">
  <a href="{{ url_for('comments.comments', sort='book_id', order=next_order) }}">
    Book ID {% if sort_column == 'book_id' %} 
      {% if current_order == 'asc' %} ▲ 
      {% elif current_order == 'desc' %} ▼ 
      {% endif %} 
    {% endif %}
  </a>
</th>
<th scope="col">
  <a href="{{ url_for('comments.comments', sort='comment_datetime', order=next_order) }}">
    Comment Datetime {% if sort_column == 'comment_datetime' %} 
      {% if current_order == 'asc' %} ▲ 
      {% elif current_order == 'desc' %} ▼ 
      {% endif %} 
    {% endif %}
  </a>
</th>
<th scope="col">
  <a href="{{ url_for('comments.comments', sort='user_id', order=next_order) }}">
    User ID {% if sort_column == 'user_id' %} 
      {% if current_order == 'asc' %} ▲ 
      {% elif current_order == 'desc' %} ▼ 
      {% endif %} 
    {% endif %}
  </a>
</th>
<th scope="col">
  <a href="{{ url_for('comments.comments', sort='content', order=next_order) }}">
    Content {% if sort_column == 'content' %} 
      {% if current_order == 'asc' %} ▲ 
      {% elif current_order == 'desc' %} ▼ 
      {% endif %} 
    {% endif %}
  </a>
</th>
<th scope="col">
  <a href="{{ url_for('comments.comments', sort='score', order=next_order) }}">
    Score {% if sort_column == 'score' %} 
      {% if current_order == 'asc' %} ▲ 
      {% elif current_order == 'desc' %} ▼ 
      {% endif %} 
    {% endif %}
  </a>
</th>
<th scope="col">Operations</th>
{% endblock %}
{% block rows %}
{% for comment in comments %}
<tr>
  <td>{{ comment[0] }}</td>
  <td>{{ comment[1] }}</td>
  <td>{{ comment[2] }}</td>
  <td>{{ comment[3] }}</td>
  <td>{{ comment[4] }}</td>
  <td>{{ comment[5] }}</td>
  <td>
    <div class="d-flex justify-content-start gap-1">
      <button class="btn btn-primary w-100" onclick="location.href='/comments/update/{{ comment[0] }}'">Update</button>
      <form action="/comments/delete/{{ comment[0] }}" method="POST" style="display:inline;" onsubmit="return confirmDelete()">
        <button type="submit" class="btn btn-danger w-100">Delete</button>
      </form>
    </div>
  </td>
</tr>
{% endfor %}
{% endblock %}
{% block scripts %}
<script>
function confirmDelete() {
    return confirm("Are you sure you want to delete this comment?");
}
</script>
{% endblock %}
